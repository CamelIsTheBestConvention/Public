<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.springdream.app.mapper.PointMapper">

    <!-- 개인 포인트 조회 -->
    <select id="select" resultType="pointVO">
        SELECT POINT_INDEX, CURRENT_POINT, TOTAL_POINT, MEMBER_NUMBER
        FROM TBL_POINT
        WHERE MEMBER_NUMBER = #{memberNumber}
    </select>

    <!-- 랭킹 목록 -->
    <select id="rankList" resultType="pointVO">
        SELECT POINT_INDEX, CURRENT_POINT, TOTAL_POINT, MEMBER_NUMBER
        FROM
        (
            SELECT RANK R, POINT_INDEX, CURRENT_POINT, TOTAL_POINT, MEMBER_NUMBER
            FROM
            (
                SELECT POINT_INDEX, CURRENT_POINT, TOTAL_POINT, MEMBER_NUMBER
                FROM TBL_POINT B
                ORDER BY TOTAL_POINT DESC
            ) D2
            <![CDATA[
            WHERE RANK <= #{page} * #{amount}
        )
        WHERE R > (#{page} - 1) * #{amount};

        ]]>
    </select>

</mapper>

        <!--    <select id="select" resultType="boardVO">-->
        <!--        SELECT BOARD_NUMBER, BOARD_TITLE, BOARD_WRITER, BOARD_CONTENT, BOARD_REGISTER_DATE, BOARD_UPDATE_DATE-->
        <!--        FROM TBL_BOARD-->
        <!--        WHERE BOARD_NUMBER = #{boardNumber}-->
        <!--    </select>-->

        <!--<select id="selectAll" resultType="boardVO">-->
        <!--        SELECT BOARD_NUMBER, BOARD_TITLE, BOARD_WRITER, BOARD_CONTENT, BOARD_REGISTER_DATE, BOARD_UPDATE_DATE-->
        <!--        FROM-->
        <!--        (-->
        <!--            SELECT ROWNUM R, BOARD_NUMBER, BOARD_TITLE, BOARD_WRITER, BOARD_CONTENT, BOARD_REGISTER_DATE, BOARD_UPDATE_DATE-->
        <!--            FROM-->
        <!--            (-->
        <!--                SELECT BOARD_NUMBER, BOARD_TITLE, BOARD_WRITER, BOARD_CONTENT, BOARD_REGISTER_DATE, BOARD_UPDATE_DATE-->
        <!--                FROM TBL_BOARD B-->
        <!--                ORDER BY BOARD_NUMBER DESC-->
        <!--            ) D2-->
        <!--        <![CDATA[-->
        <!--        WHERE ROWNUM <= #{page} * #{amount}-->
        <!--        ) WHERE R > (#{page} - 1) * #{amount}-->
        <!--        ]]>-->
        <!--</select>-->














